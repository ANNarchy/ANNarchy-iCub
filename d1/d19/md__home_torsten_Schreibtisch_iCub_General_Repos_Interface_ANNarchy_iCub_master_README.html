<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ANNarchy iCub Interface: ANNarchy iCub Interface</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ANNarchy iCub Interface
   &#160;<span id="projectnumber">1.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d1/d19/md__home_torsten_Schreibtisch_iCub_General_Repos_Interface_ANNarchy_iCub_master_README.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ANNarchy iCub Interface </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This program is an interface between the Neurosimulator ANNarchy and the iCub robot (tested with the iCub simulator and partly with gazebo). It is written in C++ with a Cython wrapping to Python.</p>
<h1><a class="anchor" id="autotoc_md17"></a>
Interface Module level description</h1>
<p>Possible actions are the reading and writing of joint angles, get the current state or move the robot joints. Further, the camera images and the tactile sensors data can be received.</p>
<p>The interface consists of different parts. Clustering the different tasks of the interface:</p>
<ol type="1">
<li>ANNarchy_iCub_Populations<ul>
<li>In the ANNarchy_iCub_Populations submodule the specific input/output ANNarchy populations are defined. This can only be used with gRPC to receive/send the data from/to the iCub modules.</li>
</ul>
</li>
<li>iCub<ul>
<li>This submodule consists on the one hand of the core modules to communicate with the iCub, which are the sensor reader (Skin, Camera, Joint) and the joint writer. The core modules are described in more detail in the following:<ol type="a">
<li><em>iCubInterface:</em><br  />
 This is mangement module consists of an abstract main Wrapper and gives the opportunity to load/save the interface modules from/to a given XML-file.</li>
<li><em>JointReader:</em><br  />
 This module handles the joint reading. The iCub robot is divided in multiple robot parts, which are the head, right arm, left arm, torso right leg and left leg.<br  />
 Before the first usage of a joint reader instance, it has to be initialized with some specifications like the robot part. Then the joint angles can be received in two ways. As a double value or in a population code for one, multiple or all joint/s of the associated iCub part.</li>
<li><em>JointWriter:</em><br  />
 The joint writer has a similar structure to the joint reader. They also has to be initialized before usage.<br  />
 For the writing of the joint angles the same ways are possible like for the reading. The joint angle can be written as double value or as population code for one, multiple or all joint/s of the associated part.</li>
<li><em>VisualReader:</em><br  />
 This module handles the receiving of the camera images.<br  />
 This reader can be initilized for the right ('r') or left ('l') eye, limiting the visual data to be monocular. The grayscaled image is returned as an 1D-vector with a normalization from 0.0 (black) to 1.0 (white).<br  />
 In the binocular mode ('b') the images of both cameras images are received and seperately added as 1D-vectors to the image buffer.</li>
<li><em>SkinReader:</em><br  />
 This module handles the tactile data from the iCub's artificial skin. The robot is at several parts equipped with skin modules, reacting to pressure.<br  />
 The sensor data for the arms can be read out with this module. The skin of the iCub arm is seperated in three modules, being the arm, forearm and hand.<br  />
 The tactile data is returned as a vector with doubles in a range of 0.0 to 1.0. Where 0. is no pressure and 1.0 is the maximum sensor response.</li>
<li><em>KinematicReader:</em><br  />
 This module handles the iCub forward kinematic to receive the cartesian coordinates for specific joints or end-effectors like the hand. This module could be used online, retrieving the joint angles from the running iCub or offline with given joint angles.</li>
<li><em>KinematicWriter:</em><br  />
 This module handles the iCub inverse kinematics. This module could be used online, retrieving the joint angles from the running iCub or offline with given joint angles.</li>
</ol>
</li>
</ul>
</li>
<li>Sync<ul>
<li>The Sync module provide two classes MasterClock and ClockInterface. Thereby, the MasterClock is the main synchronization handler and for the use exactly one instance of it is needed to create. To synchronize the ANNarchy and iCub simulations, for each side one derived class of the ClockInterface has to be created. This class provide two abstract functions, which has to be impleemnted. The first is the update method and the second is sync_input. These method are executed once for update step. The timing can be individually be set and is dependent on the usecase.<br  />
 At this time this synchronization mechanism should only be used with the iCub in simulation.</li>
</ul>
</li>
<li>Vocabs<ul>
<li>The Vocabs module provide several useful constants like the iCub part strings or a mapping from the joint names to the joint indices in the respective part.</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md18"></a>
Installation</h1>
<p>Make sure YARP is installed before installing the interface. An installation guide for YARP/iCub can be found in the github <a href="https://github.com/robotology/robotology-superbuild">superbuild repository</a> of the YARP/iCub universe.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
Default Installation</h2>
<p>Then the interface can be installed with pip by executing the following line in a terminal in the interface directory. In case of missing/false include directories the build_config.toml file has to be modified.<br  />
</p>
<div class="fragment"><div class="line">pip3 install .</div>
</div><!-- fragment --><p> or with git reference: </p><div class="fragment"><div class="line">pip3 install git+https://github.com/ANNarchy/ANNarchy-iCub.git</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md20"></a>
Enable Low-Level gRPC communication</h2>
<p>The interface is build in a default configuration. In this case the gRPC communication with ANNarchy is disabled. To enable this part, set the use_grpc parameter in build_config.toml to True. This part depends on the gRPC package and the protobuf compiler. The system packages are recommended especially for recent Linux versions (&gt;Ubuntu 18.XX). Install the following apt packages: protobuf-compiler-grpc, libgrpc++-dev </p><div class="fragment"><div class="line">sudo apt install protobuf-compiler-grpc libgrpc++-dev</div>
</div><!-- fragment --><p> For the source installation of gRPC (<a href="https://grpc.io/docs/languages/cpp/quickstart/#install-grpc">installation from the repository</a> with cmake or bazel) you need to take care of other packages, using protobuf like gazebo to handle the needed versions. Since this can lead to a lot of trouble, the use of the system packages is recommended.</p>
<h1><a class="anchor" id="autotoc_md21"></a>
useful links</h1>
<p>Wiki for the iCub robot:<br  />
 <a href="https://icub-tech-iit.github.io/documentation/">https://icub-tech-iit.github.io/documentation/</a> <br  />
 <a href="http://wiki.icub.org/wiki/Manual">http://wiki.icub.org/wiki/Manual</a> (partially outdated)</p>
<p>YARP website:<br  />
 <a href="http://www.yarp.it/git-master/index.html">http://www.yarp.it/git-master/index.html</a></p>
<p>iCub community (hosted by iit) on github:<br  />
 <a href="https://github.com/robotology">https://github.com/robotology</a></p>
<p>git repository with helpful documents and scripts for the work with iCub:<br  />
 <a href="https://github.com/tfietzek/iCub_simulation_tools.git">https://github.com/tfietzek/iCub_simulation_tools.git</a></p>
<h1><a class="anchor" id="autotoc_md22"></a>
Authors</h1>
<p>Torsten Fietzek (<a href="#" onclick="location.href='mai'+'lto:'+'tor'+'st'+'en.'+'fi'+'etz'+'ek'+'@in'+'fo'+'rma'+'ti'+'k.t'+'u-'+'che'+'mn'+'itz'+'.d'+'e'; return false;">torst<span style="display: none;">.nosp@m.</span>en.f<span style="display: none;">.nosp@m.</span>ietze<span style="display: none;">.nosp@m.</span>k@in<span style="display: none;">.nosp@m.</span>forma<span style="display: none;">.nosp@m.</span>tik.<span style="display: none;">.nosp@m.</span>tu-ch<span style="display: none;">.nosp@m.</span>emni<span style="display: none;">.nosp@m.</span>tz.de</a>)<br  />
 Helge Ülo Dinkelbach (<a href="#" onclick="location.href='mai'+'lto:'+'hel'+'ge'+'.di'+'nk'+'elb'+'ac'+'h@g'+'ma'+'il.'+'co'+'m'; return false;">helge<span style="display: none;">.nosp@m.</span>.din<span style="display: none;">.nosp@m.</span>kelba<span style="display: none;">.nosp@m.</span>ch@g<span style="display: none;">.nosp@m.</span>mail.<span style="display: none;">.nosp@m.</span>com</a>)<br  />
 Fred Hamker <br  />
</p>
<h1><a class="anchor" id="autotoc_md23"></a>
Publications</h1>
<p>Fietzek, T., Dinkelbach, H. Ü., &amp; Hamker, F. H. (2022). ANNarchy - iCub: An Interface for Easy Interaction between Neural Network Models and the iCub Robot. 2022 IEEE 9th International Conference on Computational Intelligence and Virtual Environments for Measurement Systems and Applications (CIVEMSA), 1–6. <a href="https://doi.org/10.1109/CIVEMSA53371.2022.9853699">https://doi.org/10.1109/CIVEMSA53371.2022.9853699</a></p>
<h1><a class="anchor" id="autotoc_md24"></a>
Dependencies</h1>
<ul>
<li>g++ &gt;= 6.1</li>
<li>YARP &gt;= 3.4</li>
<li>OpenCV &gt;= 3.4</li>
<li>Python &gt;= 3.10</li>
<li>cython &gt; 0.20</li>
<li>numpy &gt;= 1.13</li>
<li>tomlkit</li>
</ul>
<h2><a class="anchor" id="autotoc_md25"></a>
Optional</h2>
<ul>
<li>ANNarchy &gt;= 4.7</li>
<li>gRPC &gt;= </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
